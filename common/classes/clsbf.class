OBJECT=TAPE
TAPE:TYPE=ARRAY

OBJECT=TAPE_PTR
TAPE_PTR:TYPE=INTEGER
TAPE_PTR:VALUE=0

OBJECT=PROGRAM_LENGTH
PROGRAM_LENGTH:TYPE=INTEGER
PROGRAM_LENGTH:VALUE=0

OBJECT=PROGRAM_PTR
PROGRAM_PTR:TYPE=INTEGER
PROGRAM_PTR:VALUE=0

OBJECT=JUMP_TABLE
JUMP_TABLE:TYPE=ARRAY

OBJECT=BF_CODE
BF_CODE:TYPE=STRING
BF_CODE:ONBRUTALCHANGED={PROGRAM_LENGTH^SET(BF_CODE^LEN());}

OBJECT=INITIALIZE_JUMP_TABLE
INITIALIZE_JUMP_TABLE:TYPE=BEHAVIOUR
INITIALIZE_JUMP_TABLE:CODE={@LOOP("{JUMP_TABLE^ADD(-1);}",0,PROGRAM_LENGTH,1);}

OBJECT=INITIALIZE_TAPE
INITIALIZE_TAPE:TYPE=BEHAVIOUR
INITIALIZE_TAPE:CODE={@LOOP("{TAPE^ADD(0);}",0,30000,1);}

OBJECT=CONSTRUCTOR
CONSTRUCTOR:TYPE=BEHAVIOUR
CONSTRUCTOR:CODE={INITIALIZE_TAPE^RUN();BF_CODE^SET($1);INITIALIZE_JUMP_TABLE^RUN();}

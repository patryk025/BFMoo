OBJECT=PIKSEL
PIKSEL:TYPE=ANIMO
PIKSEL:FILENAME=$COMMON\RGB332_PALETTE.ANN
PIKSEL:VISIBLE=TRUE
PIKSEL:TOCANVAS=TRUE
PIKSEL:PRIORITY=25
PIKSEL:FPS=60
PIKSEL:PRELOAD=TRUE
PIKSEL:RELEASE=TRUE
PIKSEL:MONITORCOLLISION=FALSE
PIKSEL:MONITORCOLLISIONALPHA=FALSE
PIKSEL:ASBUTTON=FALSE

OBJECT=LOGS
LOGS:TYPE=STRING
LOGS:VALUE=
LOGS:TOINI=TRUE
LOGS:DEFAULT=

OBJECT=GRIDW
GRIDW:TYPE=INTEGER
GRIDW:VALUE=16

OBJECT=GRIDH
GRIDH:TYPE=INTEGER
GRIDH:VALUE=16

OBJECT=CANVASW
CANVASW:TYPE=INTEGER
CANVASW:VALUE=800

OBJECT=CANVASH
CANVASH:TYPE=INTEGER
CANVASH:VALUE=600

OBJECT=TILESIZEX
TILESIZEX:TYPE=INTEGER
TILESIZEX:VALUE=37

OBJECT=TILESIZEY
TILESIZEY:TYPE=INTEGER
TILESIZEY:VALUE=37

OBJECT=GAP
GAP:TYPE=INTEGER
GAP:VALUE=0

OBJECT=X
X:TYPE=INTEGER
X:VALUE=0
#X:ONBRUTALCHANGED={LOGS^ADD(["X_"+X^GET()+"v"]);}

OBJECT=Y
Y:TYPE=INTEGER
Y:VALUE=0
#Y:ONBRUTALCHANGED={LOGS^ADD(["Y_"+Y^GET()+"v"]);}

OBJECT=GRIDPIXELW
GRIDPIXELW:TYPE=INTEGER
GRIDPIXELW:VALUE=0
#GRIDPIXELW:ONBRUTALCHANGED={LOGS^ADD(["GRIDPIXELW_"+GRIDPIXELW^GET()+"v"]);}

OBJECT=GRIDPIXELH
GRIDPIXELH:TYPE=INTEGER
GRIDPIXELH:VALUE=0
#GRIDPIXELH:ONBRUTALCHANGED={LOGS^ADD(["GRIDPIXELH_"+GRIDPIXELH^GET()+"v"]);}

OBJECT=ORIGINX
ORIGINX:TYPE=INTEGER
ORIGINX:VALUE=0
#ORIGINX:ONBRUTALCHANGED={LOGS^ADD(["ORIGINX_"+ORIGINX^GET()+"v"]);}

OBJECT=ORIGINY
ORIGINY:TYPE=INTEGER
ORIGINY:VALUE=0
#ORIGINY:ONBRUTALCHANGED={LOGS^ADD(["ORIGINY_"+ORIGINY^GET()+"v"]);}

OBJECT=PIXELX
PIXELX:TYPE=INTEGER
PIXELX:VALUE=0
#PIXELX:ONBRUTALCHANGED={LOGS^ADD(["PIXELX_"+PIXELX^GET()+"v"]);}

OBJECT=PIXELY
PIXELY:TYPE=INTEGER
PIXELY:VALUE=0
#PIXELY:ONBRUTALCHANGED={LOGS^ADD(["PIXELY_"+PIXELY^GET()+"v"]);}

OBJECT=PIXEL_NAME
PIXEL_NAME:TYPE=STRING
#PIXEL_NAME:ONBRUTALCHANGED={LOGS^ADD(["PIXEL_NAME"+PIXEL_NAME^GET()+"v"]);}

OBJECT=SET_PIXEL_POSITIONS
SET_PIXEL_POSITIONS:TYPE=BEHAVIOUR
SET_PIXEL_POSITIONS:CODE={GRIDPIXELW^SET([GRIDW*TILESIZEX+[GRIDW-1*GAP]]);GRIDPIXELH^SET([GRIDH*TILESIZEY+[GRIDH-1*GAP]]);ORIGINX^SET([[CANVASW-GRIDPIXELW]@2]);ORIGINY^SET([[CANVASH-GRIDPIXELH]@2]);@LOOP("{X^SET([_I_%GRIDW]);Y^SET([_I_@GRIDH]);PIXELX^SET([ORIGINX+[X*[TILESIZEX+GAP]]]);PIXELY^SET([ORIGINY+[Y*[TILESIZEY+GAP]]]);PIXEL_NAME^SET(["PIKSEL_"+_I_]);*PIXEL_NAME^SETPOSITION(PIXELX,PIXELY);}",0,256,1);}

OBJECT=INITIALIZE_SURFACE
INITIALIZE_SURFACE:TYPE=BEHAVIOUR
INITIALIZE_SURFACE:CODE={PIKSEL^CLONE(255);SET_PIXEL_POSITIONS^RUN();}

OBJECT=DEBUG_COLOR_PALETTE
DEBUG_COLOR_PALETTE:TYPE=BEHAVIOUR
DEBUG_COLOR_PALETTE:CODE={@LOOP("{*["PIKSEL_"+_I_]^SETFRAME(0,_I_);}",0,256,1);}

OBJECT=CONSTRUCTOR
CONSTRUCTOR:TYPE=BEHAVIOUR
CONSTRUCTOR:CODE={LOGS^SET("");INITIALIZE_SURFACE^RUN();}
